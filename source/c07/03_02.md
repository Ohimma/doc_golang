## 3.01 项目: 海量用户聊天工具

<https://github.com/Ohimma/ChatRoom>

#### 1. 需求分析

1. 用户注册
2. 用户登录
3. 现在在线用户
4. 群聊(广播)
5. 点对点聊天
6. 离线留言

#### 2. 界面设计
... 文本界面....

#### 3. 功能实现

第一阶段：     
先完成 client 大致框架，print输出     

第二阶段：   
客户端和服务端的 tcp 连接     

第三阶段：(需要做函数的封装)        
1. 构造 message 消息体
2. 完成 客户端可以发送 登录message
3. 完成 服务端可以接收 登录message，并反序列化成 消息结构体
4. 服务端 根据消息结构体，判断用户是否合法，返回LoginResMes
5. 客户端 根据LoginResMes，显示对应的界面

第四阶段： 对象化      
1. 服务端 程序结构改进，对程序进行功能拆分独立文件维护 (那层被调用的多，先调试哪个)     
![](../_static/51_ccc.png)   

2. 客户端 程序结构改造      
![](../_static/51_ddd.png)      


第五阶段：    
1. 使用 redis 存储用户信息   
hset users 100 "{\"UserID\":100,\"UserPwd\":\"123456\",\"UserName\":\"jack\"}"


第六阶段：    
1. 实现用户注册   
2. 实现推送在线用户列表
3. 实现群聊

扩展阶段：
1. 实现私聊
2. 用户离线后，从在线用户列表删除
3. 实现离线留言，群聊时，用户不在线的话，当登陆后，把消息发给他
4. 发送一个文件
